$(function(){var n=null;CKEDITOR.replace("htmleditor",{height:400,autoParagraph:!1,fullPage:!1,filebrowserUploadUrl:"/Account/CKEditorUpload/",filebrowserImageUploadUrl:"/Account/CKEditorUpload/"});CKEDITOR.on("dialogDefinition",function(n){var e=n.data.name,o=n.data.definition,t,r,u,f,i;e=="link"&&(t=o.getContents("advanced"),t.label="SpecialLinks",t.remove("advCSSClasses"),t.remove("advCharset"),t.remove("advContentType"),t.remove("advStyles"),t.remove("advAccessKey"),t.remove("advName"),t.remove("advLangCode"),t.remove("advTabIndex"),r=t.get("advRel"),r.label="SmallGroup",u=t.get("advTitle"),u.label="Message",f=t.get("advId"),f.label="OrgId/MeetingId",i=t.get("advLangDir"),i.label="Confirmation",i.items[1][0]="Yes, send confirmation",i.items[2][0]="No, do not send confirmation")});$("a.save").click(function(){var t=CKEDITOR.instances.htmleditor.getData();$(n).html(t),$("#popupeditor").hide(),dimOff()}),$("a.cancel").click(function(){$("#popupeditor").hide(),dimOff()}),$("a.bt").button(),$.hClick=function(){n=this,$.removeButtons(),CKEDITOR.instances.htmleditor.setData($(this).html()),dimOn(),$("#popupeditor").show().center()},$("div[bvedit]").bind("click",$.hClick).addClass("ti"),$("#progress").dialog({autoOpen:!1,modal:!0,close:function(){$("#progress").html("<h2>Working...<\/h2>")}}),$("#askName").dialog({autoOpen:!1,modal:!0,closeOnEscape:!0,title:"Save Draft",resizable:!1,width:"auto"}),$("#Send").click(function(){var n=$("#progress"),t;n.dialog("open"),$("#body").val($("#tempateBody").html()),t=$("#SendEmail").serialize(),$.post("/Email/QueueEmails",t,function(t){var i,r;if(t=="timeout"){window.location="/Email/Timeout";return}i=t.id,i==0?n.html(t.content):r=window.setInterval(function(){$.post("/Email/TaskProgress/"+i,null,function(t){t.substr(0,20).indexOf("<!--completed-->")>=0&&window.clearInterval(r),n.html(t)})},3e3)})}),$("#SaveDraft").click(function(){if($(this).attr("saveType")=="0"){var n=$("#askName");n.dialog("open")}else $.clearTemplateClass(),$("#body").val($("#tempateBody").html()),$("#name").val($("#newName").val()),$.addTemplateClass(),$("#SendEmail").attr("action","/Email/SaveDraft"),$("#SendEmail").submit()}),$("#SaveDraftButton").click(function(){$.clearTemplateClass(),$("#body").val($("#tempateBody").html()),$("#name").val($("#newName").val()),$.addTemplateClass(),$("#SendEmail").attr("action","/Email/SaveDraft"),$("#SendEmail").submit()}),$("#TestSend").click(function(){var n=$("#progress"),t;n.dialog("open"),$.clearTemplateClass(),$("#body").val($("#tempateBody").html()),$.addTemplateClass(),t=$("#SendEmail").serialize(),$.post("/Email/TestEmail",t,function(t){if(t=="timeout"){window.location="/Email/Timeout";return}n.html(t)})}),$.removeButtons=function(){$("#controlButtons").remove()},$.hClickAdd=function(){$.removeButtons(),parentTR=$(currentHover).parent();var n=$(currentHover).clone();$(parentTR).after($(n)),n.wrap("<tr><\/tr>"),n.attr("bvrepeatadd",""),n.removeAttr("bvrepeat"),n.mouseenter($.hAddHoverIn).mouseleave($.hHoverOut),$("div[bvedit]").bind("click",$.hClick).addClass("ti")},$.hHoverIn=function(n){currentHover=this,$(this).css("border","solid 1px #ff0000"),$(this).append("<div id='controlButtons' class='tiAdd'><input id='addButton' type='button' value='Copy Section' /><\/div>"),$("#controlButtons").css("top",$(this).offset().top+5).css("left",$(this).offset().left+5),$("#addButton").bind("click",$.hClickAdd),n.stopPropagation()},$.clearTemplateClass=function(){$.removeButtons(),$("div[bvedit]").removeClass(),$("div[bveditadd]").removeClass()},$.addTemplateClass=function(){$("div[bveditadd]").addClass("ti"),$("div[bvedit]").addClass("ti")},$.hHoverOut=function(n){currentHover=null,$(this).css("border",""),$.removeButtons(),n.stopPropagation()},$("td[bvrepeat]").mouseenter($.hHoverIn).mouseleave($.hHoverOut),$.hAddHoverIn=function(){currentHover=this,$(this).css("border","solid 1px #ff0000"),$(this).append("<div id='controlButtons' class='tiAdd'><input id='removeButton' type='button' value='Remove' /><\/div>"),$("#controlButtons").css("top",$(this).offset().top+5).css("left",$(this).offset().left+5),$("#removeButton").bind("click",$.removeSection)},$.updateDiv=function(){var t=CKEDITOR.instances.htmleditor.getData();$(n).html(t),$("#popupeditor").hide("close")},$.addRowAfter=function(n){$(this).parent().parent().after("<tr bvrepeatadd=''>"+$(this).html()+"<\/tr>"),$("div[bvrepeatadd]").hover($.hAddHoverIn,$.hHoverOut),n.stopPropagation()},$.removeSection=function(n){$(currentHover).parent().remove(),n.stopPropagation()}});
//@ sourceMappingURL=compose.min.js.map