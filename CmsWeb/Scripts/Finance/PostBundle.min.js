function AddSelected(n){$("#searchDialog").dialog("close");var t=$("tr[cid="+n.cid+"]");$("a.pid",t).text(n.pid),$("td.name",t).text(n.name),$("a.edit",t).click()}$(function(){$("#pid").blur(function(){var n,t,i;if($(this).val()=="")return!1;if($(this).val()=="d")return n=$("#bundle > tbody > tr:first"),t=$("a.pid",n).text(),$("#name").val($("td.name",n).text()),$("#checkno").val($("td.checkno",n).text()),$("#notes").val($("td.notes",n).text()),$("#amt").focus(),$(this).val($.trim(t)),!0;i=$("#pbform").serialize(),$.post("/PostBundle/GetNamePid/",i,function(n){n.error=="not found"?($.growlUI("PeopleId","Not Found"),$("#name").focus(),$("#pid").val("")):($("#name").val(n.name),$("#pid").val(n.PeopleId),$("#amt").focus())})}),$(".bt").button(),$("td.name").tooltip({showBody:"|"});$(".ui-autocomplete-input").on("autocompleteopen",function(){var n=$(this).data("autocomplete"),t=n.menu;n.options.selectFirst&&t.activate($.Event({type:"mouseenter"}),t.element.children().first())});$("#name").focus(function(){$.enteredname=$(this).val()}),$("#name").autocomplete({autoFocus:!0,minLength:3,source:function(n,t){$.post("/PostBundle/Names",n,function(n){t(n.slice(0,10))},"json")},select:function(n,t){return $("#name").val(t.item.Name),$("#pid").val(t.item.Pid),!1}}).data("uiAutocomplete")._renderItem=function(n,t){return $("<li>").append("<a>"+t.Name+"<br>"+t.Addr+"<\/a>").appendTo(n)},$("#name").blur(function(){if($("#pid").val()==""&&$(this).val()!="")$.growlUI("Name","Not Found"),$("#name").focus();else if($(this).val()!=$.enteredname&&$.enteredname!=""){var n=$("#pbform").serialize();$.post("/PostBundle/GetNamePid/",n,function(n){n.error=="not found"?($.growlUI("PeopleId","Not Found"),$("#name").focus(),$("#pid").val("")):($("#name").val(n.name),$("#pid").val(n.PeopleId),$("#amt").focus())})}}),$.Stripe=function(){$("#bundle tbody tr").removeClass("alt"),$("#bundle tbody tr:even").addClass("alt")},$.Stripe();var n=!0;$("#notes").keydown(function(t){n&&(t.keyCode==9||t.keyCode==13)&&!t.shiftKey&&(t.preventDefault(),n=!1,$.PostRow({scroll:!1}))}),$("#pid").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$.browser.msie||$("#pid").blur(),$("#name").focus())}),$("#name").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#amt").focus())}),$("#amt").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#fund").focus())}),$("#fund").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#checkno").focus())}),$("#checkno").keydown(function(n){n.keyCode==13&&(n.preventDefault(),$("#notes").focus())}),$("a.update").click(function(n){n.preventDefault(),$.PostRow({scroll:!0})});$("body").on("click","a.edit",function(n){var t,i,r;n.preventDefault(),t=$(this).closest("tr"),$("#editid").val(t.attr("cid")),$("#pid").val($.trim($("a.pid",t).text())),$("#name").val($("td.name",t).text()),$("#contributiondate").val($(".date",t).val()),$("#gear").show(),$("#fund").val($("td.fund",t).attr("val")),i=$("td.PLNT",t).text(),$("#entry .PLNT").html(i),i=i||"CN",$("input[name=PLNT][value="+i+"]").prop("checked",!0),r=$("#amt"),r.val($("td.amt",t).attr("val")),$("#checkno").val($("td.checkno",t).text()),$("#notes").val($("td.notes",t).text()),t.hide(),r.val()=="0.00"&&r.val(""),$("html,body").animate({scrollTop:0},600),r.focus(),$("a.edit").hide(),$("a.split").hide(),$("a.delete").hide(),$.Stripe()});$("input[name='PLNT']").change(function(){var n=$(this).val();n=="CN"&&(n=""),$("#entry .PLNT").text(n)});$("body").on("click","a.split",function(n){var i,t,r;if(n.preventDefault(),i=prompt("Amount to split out",""),i=parseFloat(i),isNaN(i))return!1;t=$(this).closest("tr"),r={pid:$("a.pid",t).text(),name:$("td.name",t).text(),fund:$("td.fund",t).attr("val"),pledge:$("td.fund",t).attr("pledge"),amt:i,splitfrom:t.attr("cid"),checkno:$("td.checkno",t).text(),notes:$("td.notes",t).text(),id:$("#id").val()},$.PostRow({scroll:!0,q:r})});$("body").on("click","a.delete",function(n){var t,i;n.preventDefault(),confirm("are you sure?")&&(t=$(this).closest("tr"),$("#editid").val(t.attr("cid")),i=$("#pbform").serialize(),$.post("/PostBundle/DeleteRow/",i,function(n){t.remove(),$("#totalitems").text(n.totalitems),$("#itemcount").text(n.itemcount),$("#editid").val(""),$.Stripe()}))});$("body").on("click","a.pid",function(n){n.preventDefault();var t=$("#searchDialog");$("iframe",t).attr("src",this.href),t.dialog("open")});$("#bundle").bind("mousedown",function(n){$(n.target).hasClass("clickEdit")?$(n.target).editable(function(t){return $.post("/PostBundle/Edit/",{id:n.target.id,value:t},function(n){$("#totalitems").text(n.totalitems),$("#itemcount").text(n.itemcount),$("#a"+n.cid).text(n.amt)}),t},{indicator:"<img src='/images/loading.gif'>",tooltip:"Click to edit...",style:"display: inline",width:"4em",height:25}):$(n.target).hasClass("clickSelect")&&$(n.target).editable("/PostBundle/Edit/",{indicator:'<img src="/images/loading.gif">',loadtype:"post",loadurl:"/PostBundle/Funds/",type:"select",submit:"OK",style:"display: inline"})}),$.PostRow=function(t){var r,u,f,i;if($("#gear").hide(),!t.q){if(r=parseFloat($("#amt").val()),u=$("#entry .PLNT").text(),!r>0&&u!="GK"){$.growlUI("Contribution","Cannot post, No Amount");return}if(!isNaN(r)&&r!=0&&u=="GK"){$.growlUI("Contribution","Cannot post, Gift In Kind must be zero");return}t.q=$("#pbform").serialize()}f="/PostBundle/PostRow/",i=$("#editid").val(),i&&(f="/PostBundle/UpdateRow/"),$.post(f,t.q,function(r){var e,u,f;if(r){if(r.error){alert(r.error);return}$("#totalitems").text(r.totalitems),$("#itemcount").text(r.itemcount),e=$("#pid").val(),i?(u=$('tr[cid="'+i+'"]'),u.replaceWith(r.row),u=$('tr[cid="'+i+'"]')):t.q.splitfrom?(u=$('tr[cid="'+t.q.splitfrom+'"]'),$("#a"+t.q.splitfrom).text(r.othersplitamt),$(r.row).insertAfter(u),u=$('tr[cid="'+r.cid+'"]')):($("#bundle tbody").prepend(r.row),u=$("#bundle tbody tr:first")),$("td.name",u).tooltip({showBody:"|"}),$("a.edit").show(),$("a.split").show(),$("a.delete").show(),$(".bt",u).button(),$("#editid").val(""),$("#entry input").val(""),$("#fund").val($("#fundid").val()),$.Stripe(),$("#pid").focus(),n=!0,f=u.offset().top-360,t.scroll==!0&&$("html,body").animate({scrollTop:f},1e3),u.effect("highlight",{},3e3)}})},$("#searchDialog").dialog({title:"Search/Add Contributor",bgiframe:!0,autoOpen:!1,width:750,height:700,modal:!0,overlay:{opacity:.5,background:"black"},close:function(){$("iframe",this).attr("src","")}}),$("#totalitems").text($("#titems").val()),$("#totalcount").text($("#tcount").val()),$("#showmove").click(function(n){n.preventDefault(),$.blockUI({message:$("#movebundle")})}),$("#moveit").click(function(t){t.preventDefault(),$.post("/PostBundle/Move/"+$("#editid").val(),{moveto:$("#moveto").val()},function(t){$.unblockUI(),t.status==="ok"?($("#editid").val(""),$("#entry input").val(""),$("#fund").val($("#fundid").val()),$("#pid").focus(),$("#totalitems").text(t.totalitems),$("#itemcount").text(t.itemcount),n=!0,$.growlUI("Contribution","Contribution Moved")):$.growlUI("Move To Bundle",t)})}),$("#movecancel").click(function(n){n.preventDefault(),$.unblockUI()}),$("#showdate").click(function(n){n.preventDefault(),$("#contributiondate").datepicker(),$.blockUI({message:$("#editdate")})}),$("#editdatedone").click(function(n){n.preventDefault(),$.unblockUI()})});
//@ sourceMappingURL=PostBundle.min.js.map